(self.webpackChunktask_shop=self.webpackChunktask_shop||[]).push([[69],{8069:(t,e,r)=>{"use strict";r.r(e),r.d(e,{UserModule:()=>B});var n=r(8583),i=r(665),o=r(7957),s=r(7716),c=r(9491);let a=(()=>{class t{constructor(t,e){this.userService=t,this.router=e}canActivate(t,e){return this.userService.isAuthorized||this.router.navigate(["user/register"]),this.userService.isAuthorized}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(c.K),s.LFG(o.F0))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var g=r(5319),l=r(8002),u=r(9471);function d(t,e){1&t&&(s.O4$(),s.TgZ(0,"svg",3),s._UZ(1,"path",4),s.qZA())}function m(t,e){1&t&&(s.O4$(),s.TgZ(0,"svg",5),s._UZ(1,"path",6),s.qZA())}let p=(()=>{class t{constructor(){this.rating=0}generateStars(t){return new Array(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-good-rating"]],inputs:{rating:"rating"},decls:3,vars:2,consts:[[1,"raiting"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-star-fill me-1","viewBox","0 0 16 16",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","class","bi bi-star me-1","viewBox","0 0 16 16",4,"ngFor","ngForOf"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-star-fill","me-1"],["d","M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-star","me-1"],["d","M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.522-3.356c.33-.314.16-.888-.282-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288L8 2.223l1.847 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.565.565 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.YNc(1,d,2,0,"svg",1),s.YNc(2,m,2,0,"svg",2),s.qZA()),2&t&&(s.xp6(1),s.Q6J("ngForOf",e.generateStars(e.rating)),s.xp6(1),s.Q6J("ngForOf",e.generateStars(5-e.rating)))},directives:[n.sg],styles:[".raiting[_ngcontent-%COMP%]{color:#ff4c3b}"]}),t})();function f(t,e){1&t&&(s.TgZ(0,"p"),s._uU(1,"\u0421\u043f\u0438\u0441\u043e\u043a \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u043f\u0443\u0441\u0442"),s.qZA())}function h(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",15),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().addItemToCart(e)}),s._uU(1," \u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443 "),s.qZA()}}function b(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"button",16),s.NdJ("click",function(){s.CHM(t);const e=s.oxw().$implicit;return s.oxw().removeItemFromCart(e)}),s._uU(1," \u0423\u0431\u0440\u0430\u0442\u044c \u0438\u0437 \u043a\u043e\u0440\u0437\u0438\u043d\u044b "),s.qZA()}}function Z(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",5),s.TgZ(1,"div",6),s._UZ(2,"img",7),s.TgZ(3,"h2",8),s._uU(4),s.ALo(5,"uppercase"),s.qZA(),s._UZ(6,"app-good-rating",9),s.TgZ(7,"h3",10),s._uU(8),s.ALo(9,"currency"),s.qZA(),s.TgZ(10,"div",11),s.YNc(11,h,2,0,"button",12),s.YNc(12,b,2,0,"button",13),s.TgZ(13,"button",14),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().deleteItem(e.id)}),s._uU(14," \u0423\u0434\u0430\u043b\u0438\u0442\u044c "),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.Q6J("src",t.imageUrls[0],s.LSH),s.xp6(2),s.Oqu(s.lcZ(5,6,t.name)),s.xp6(2),s.Q6J("rating",t.rating),s.xp6(2),s.Oqu(s.lcZ(9,8,t.price)),s.xp6(3),s.Q6J("ngIf",!1===t.isInCart),s.xp6(1),s.Q6J("ngIf",!0===t.isInCart)}}let v=(()=>{class t{constructor(t,e){this.userService=t,this.appdata=e,this.favorItems=[],this.userSubscr=g.w.EMPTY,this.itemSubscr=g.w.EMPTY}ngOnInit(){this.getFavorites()}ngOnDestroy(){this.userSubscr.unsubscribe(),this.itemSubscr.unsubscribe()}getFavorites(){this.userSubscr=this.userService.getUserInfo().pipe((0,l.U)(t=>t.favorites)).subscribe(t=>{t.forEach(t=>{this.getItemById(t)})})}getItemById(t){this.itemSubscr=this.appdata.getShopItemById(t).subscribe(t=>this.favorItems.push(t))}addItemToCart(t){this.userService.addCartItem({id:t.id,amount:1}).subscribe(),t.isInCart=!0}removeItemFromCart(t){this.userService.deleteCartItem(t.id).subscribe(),t.isInCart=!1}deleteItem(t){this.userService.deleteFavoritesItem(t).subscribe(),this.favorItems=this.favorItems.filter(e=>e.id!==t)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.K),s.Y36(u.U))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-aside"]],decls:6,vars:2,consts:[[1,"favorites","container-xxl"],[1,"row"],[1,"h2"],[4,"ngIf"],["class","favorites__item col-12 col-sm-6 col-md-4 col-lg-3 mb-3",4,"ngFor","ngForOf"],[1,"favorites__item","col-12","col-sm-6","col-md-4","col-lg-3","mb-3"],[1,"card","p-3"],["alt","...",1,"card-img-top",3,"src"],[1,"h6","fw-bold"],[3,"rating"],[1,"h3","fw-bold"],[1,"d-grid","gap-2","d-md-block"],["class","btn btn-danger me-2",3,"click",4,"ngIf"],["class","btn btn-outline-danger me-2",3,"click",4,"ngIf"],[1,"btn","btn-light",3,"click"],[1,"btn","btn-danger","me-2",3,"click"],[1,"btn","btn-outline-danger","me-2",3,"click"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h2",2),s._uU(3,"\u0418\u0437\u0431\u0440\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"),s.qZA(),s.YNc(4,f,2,0,"p",3),s.YNc(5,Z,15,10,"div",4),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("ngIf",0===e.favorItems.length),s.xp6(1),s.Q6J("ngForOf",e.favorItems))},directives:[n.O5,n.sg,p],pipes:[n.gd,n.H9],styles:[".favorites__item[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%]{min-height:100%}.favorites__item[_ngcontent-%COMP%] > .card[_ngcontent-%COMP%] > .card-img-top[_ngcontent-%COMP%]{height:16rem;margin-bottom:1rem;object-fit:contain}.favorites__item[_ngcontent-%COMP%]   .h6[_ngcontent-%COMP%]{display:flex;align-items:center;height:3.6rem}.favorites__item[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]{border-color:#ff4c3b}.favorites__item[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%], .favorites__item[_ngcontent-%COMP%]   .btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#ff4c3b;border-color:#ff4c3b}.favorites__item[_ngcontent-%COMP%]   .btn-danger[_ngcontent-%COMP%]:hover{background-color:#ee4334;border-color:#ee4334}"]}),t})();const T=function(t,e){return{"is-invalid":t,"is-valid":e}};function A(t,e){if(1&t&&(s.TgZ(0,"div",8),s._UZ(1,"input",9),s.TgZ(2,"label",10),s._uU(3),s.qZA(),s.TgZ(4,"div",11),s._uU(5,"Looks good!"),s.qZA(),s.TgZ(6,"div",12),s._uU(7),s.qZA(),s.qZA()),2&t){const t=e.$implicit,r=s.oxw();s.xp6(1),s.Q6J("ngClass",s.WLB(8,T,r.authForm.controls[t].invalid&&r.authForm.controls[t].touched,r.authForm.controls[t].valid))("formControlName",t)("placeholder",t)("name",t)("type","timeToDeliver"===t?"datetime-local":"text"),s.xp6(1),s.Q6J("for",t),s.xp6(1),s.Oqu(t),s.xp6(4),s.hij("Please enter a ",t,"")}}let _=(()=>{class t{constructor(t,e){this.router=t,this.userService=e,this.fields=["login","password"],this.authForm=new i.cw({login:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z0-9]{3,40}$")]),password:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z0-9]{8,20}$")])})}submit(){const t=this.authForm.value;localStorage.setItem("currentUser",JSON.stringify(t)),this.userService.loginUser(t).subscribe(t=>{this.userService.setAuthorizationToken(t.token),this.userService.isAuthorized=!0,this.router.navigate([""])})}goUserPage(t){this.router.navigate([`user/${t}`])}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.F0),s.Y36(c.K))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-auth"]],decls:11,vars:3,consts:[[1,"container-xxl"],[1,"row"],[1,"h2","col-12","col-md-8","mx-auto","mb-4"],["novalidate","",1,"col-12","col-md-8","mx-auto",3,"formGroup","ngSubmit"],["class","form-floating mb-2",4,"ngFor","ngForOf"],[1,"form-group"],[1,"btn","btn-danger","mt-3","me-3",3,"disabled"],[1,"btn","btn-link","mt-3",3,"click"],[1,"form-floating","mb-2"],[1,"form-control",3,"ngClass","formControlName","placeholder","name","type"],[3,"for"],[1,"valid-feedback"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h2",2),s._uU(3,"\u0412\u0445\u043e\u0434 \u0432 \u0410\u043a\u043a\u0430\u0443\u043d\u0442"),s.qZA(),s.TgZ(4,"form",3),s.NdJ("ngSubmit",function(){return e.submit()}),s.YNc(5,A,8,11,"div",4),s.TgZ(6,"div",5),s.TgZ(7,"button",6),s._uU(8," \u0412\u0445\u043e\u0434 "),s.qZA(),s.TgZ(9,"button",7),s.NdJ("click",function(){return e.goUserPage("register")}),s._uU(10," \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("formGroup",e.authForm),s.xp6(1),s.Q6J("ngForOf",e.fields),s.xp6(2),s.Q6J("disabled",e.authForm.invalid))},directives:[i._Y,i.JL,i.sg,n.sg,i.Fj,n.mk,i.JJ,i.u],styles:[".btn-danger[_ngcontent-%COMP%]{padding:.375rem 1.75rem;background-color:#ff4c3b}.btn-link[_ngcontent-%COMP%]{color:#ff4c3b}.btn-link[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .25rem #ff4c3b40}"]}),t})();function q(t,e){if(1&t&&(s.TgZ(0,"tr"),s.TgZ(1,"td"),s._UZ(2,"img",19),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s._uU(6),s.qZA(),s.TgZ(7,"td",20),s._uU(8),s.ALo(9,"currency"),s.qZA(),s.qZA()),2&t){const t=e.$implicit;s.xp6(2),s.Q6J("src",t.imageUrls[0],s.LSH),s.xp6(2),s.Oqu(t.name),s.xp6(2),s.Oqu(t.description.slice(0,128)),s.xp6(2),s.Oqu(s.xi3(9,4,t.price,"BYN "))}}function x(t,e){if(1&t&&(s.TgZ(0,"table",17),s.TgZ(1,"tbody"),s.YNc(2,q,10,7,"tr",18),s.qZA(),s.qZA()),2&t){const t=s.oxw(2);s.xp6(2),s.Q6J("ngForOf",t.currentOrderItems)}}const I=function(t){return{collapsed:t}},w=function(t){return{show:t}};function C(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"div",6),s.TgZ(1,"h2",7),s.NdJ("click",function(){const e=s.CHM(t).index;return s.oxw().showOrder(e)}),s.TgZ(2,"button",8),s._uU(3),s.qZA(),s.qZA(),s.TgZ(4,"div",9),s.TgZ(5,"div",10),s.YNc(6,x,3,1,"table",11),s.TgZ(7,"form"),s.TgZ(8,"div",12),s.TgZ(9,"input",13),s.NdJ("ngModelChange",function(e){return s.CHM(t).$implicit.details.name=e}),s.qZA(),s.qZA(),s.TgZ(10,"div",12),s.TgZ(11,"input",14),s.NdJ("ngModelChange",function(e){return s.CHM(t).$implicit.details.address=e}),s.qZA(),s.qZA(),s.TgZ(12,"div",12),s.TgZ(13,"input",15),s.NdJ("ngModelChange",function(e){return s.CHM(t).$implicit.details.phone=e}),s.qZA(),s.qZA(),s.TgZ(14,"div",12),s.TgZ(15,"input",16),s.NdJ("ngModelChange",function(e){return s.CHM(t).$implicit.details.timeToDeliver=e}),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit,r=e.index,n=s.oxw();s.xp6(2),s.Q6J("ngClass",s.VKq(8,I,r!==n.currentOrder)),s.xp6(1),s.hij(" \u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u043a\u0430\u0437\u0430: ",t.id," "),s.xp6(1),s.Q6J("ngClass",s.VKq(10,w,r===n.currentOrder)),s.xp6(2),s.Q6J("ngIf",r===n.currentOrder),s.xp6(3),s.Q6J("ngModel",t.details.name),s.xp6(2),s.Q6J("ngModel",t.details.address),s.xp6(2),s.Q6J("ngModel",t.details.phone),s.xp6(2),s.Q6J("ngModel",t.details.timeToDeliver)}}let O=(()=>{class t{constructor(t,e){this.userService=t,this.appdata=e,this.userSubscription=g.w.EMPTY,this.itemSubscription=g.w.EMPTY,this.orders=[],this.currentOrderItems=[],this.currentOrder=0}ngOnInit(){this.getOrders()}ngOnDestroy(){this.userSubscription.unsubscribe(),this.itemSubscription.unsubscribe()}getOrders(){this.userSubscription=this.userService.getUserInfo().pipe((0,l.U)(t=>t.orders)).subscribe(t=>{this.orders=t.reverse(),this.getItems(this.orders[this.currentOrder].items)})}getItems(t){this.currentOrderItems=[],t.forEach(t=>{this.itemSubscription=this.appdata.getShopItemById(t.id).subscribe(t=>this.currentOrderItems.push(t))})}showOrder(t){this.currentOrder=t,this.getItems(this.orders[t].items)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.K),s.Y36(u.U))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-order-list"]],decls:7,vars:1,consts:[[1,"container-xxl"],[1,"row"],[1,"col-12"],[1,"h2"],[1,"accordion"],["class","accordion-item",4,"ngFor","ngForOf"],[1,"accordion-item"],[1,"accordion-header",3,"click"],[1,"accordion-button",3,"ngClass"],[1,"accordion-collapse","collapse",3,"ngClass"],[1,"accordion-body"],["class","table",4,"ngIf"],[1,"mb-3"],["type","text","name","name",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","address",1,"form-control",3,"ngModel","ngModelChange"],["type","text","name","phone",1,"form-control",3,"ngModel","ngModelChange"],["type","datetime-local","name","timeToDeliver",1,"form-control",3,"ngModel","ngModelChange"],[1,"table"],[4,"ngFor","ngForOf"],[1,"order__img","img-thumbnail",3,"src"],[1,"fw-bold"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"h2",3),s._uU(4,"\u041b\u0438\u0441\u0442 \u043e\u0436\u0438\u0434\u0430\u043d\u0438\u044f"),s.qZA(),s.TgZ(5,"div",4),s.YNc(6,C,16,12,"div",5),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(6),s.Q6J("ngForOf",e.orders))},directives:[n.sg,n.mk,n.O5,i._Y,i.JL,i.F,i.Fj,i.JJ,i.On],pipes:[n.H9],styles:[".order__img[_ngcontent-%COMP%]{height:5rem;min-width:5rem;object-fit:contain}.order[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{vertical-align:middle}"]}),t})(),F=(()=>{class t{constructor(t){this.router=t}navigateToMainPage(){this.router.navigate([""])}navigateToLoginPage(){this.router.navigate(["user/auth"])}navigateToRegisterPage(){this.router.navigate(["user/register"])}navigateToOrderPage(){this.router.navigate(["user/order"])}navigateToAsidePage(){this.router.navigate(["user/aside"])}navigateToCategoryPage(t){this.router.navigate([`store/goods/${t}`])}navigateToSubCategoryPage(t,e){this.router.navigate([`store/goods/${t}/${e}`])}navigateToItemPage(t){this.router.navigate([`store/item/${t}`])}}return t.\u0275fac=function(e){return new(e||t)(s.LFG(o.F0))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function J(t,e){1&t&&(s.TgZ(0,"div",2),s._uU(1," \u0417\u0430\u043a\u0430\u0437 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d!\n"),s.qZA())}const M=function(t,e){return{"is-invalid":t,"is-valid":e}};function k(t,e){if(1&t&&(s.TgZ(0,"div",11),s._UZ(1,"input",12),s.TgZ(2,"div",8),s._uU(3),s.qZA(),s.qZA()),2&t){const t=e.$implicit,r=s.oxw(2);s.xp6(1),s.Q6J("formControlName",t)("name",t)("type","timeToDeliver"===t?"datetime-local":"text")("placeholder",t)("ngClass",s.WLB(6,M,r.orderForm.controls[t].invalid&&r.orderForm.controls[t].touched,r.orderForm.controls[t].valid)),s.xp6(2),s.hij("Please enter a valid ",t,"")}}function S(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"form",3),s.NdJ("ngSubmit",function(){return s.CHM(t),s.oxw().submit()}),s.YNc(1,k,4,9,"div",4),s.TgZ(2,"div",5),s._UZ(3,"textarea",6),s.TgZ(4,"label",7),s._uU(5,"Enter your comment here"),s.qZA(),s.TgZ(6,"div",8),s._uU(7,"Max comment length is 250 simbols"),s.qZA(),s.qZA(),s.TgZ(8,"div",9),s.TgZ(9,"button",10),s._uU(10," \u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437 "),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=s.oxw();s.Q6J("formGroup",t.orderForm),s.xp6(1),s.Q6J("ngForOf",t.fields),s.xp6(2),s.Q6J("ngClass",t.orderForm.controls.comment.valid?"is-valid":"is-invalid"),s.xp6(6),s.Q6J("disabled",t.orderForm.invalid)}}let U=(()=>{class t{constructor(t,e){this.userService=t,this.appRouting=e,this.items=[],this.fields=["name","address","phone","timeToDeliver"],this.orderIsComplete=!1,this.orderForm=new i.cw({name:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z\u0410-\u042f\u0430-\u044f]{3,50}$")]),address:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z\u0410-\u042f\u0430-\u044f]{3,250}$")]),phone:new i.NI("",[i.kI.required,i.kI.pattern("^[+][0-9]{1,3}[0-9]{1,4}[0-9]{3}[0-9]{2}[0-9]{2}$")]),timeToDeliver:new i.NI("",i.kI.required),comment:new i.NI("",i.kI.maxLength(250))})}submit(){const t=this.items.map(t=>({id:t.id,amount:t.amount?t.amount:1}));this.userService.addOrder({items:t,details:this.orderForm.value}).subscribe(),this.orderIsComplete=!0,setTimeout(()=>this.appRouting.navigateToMainPage(),2e3)}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.K),s.Y36(F))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-order-form"]],inputs:{items:"items"},decls:2,vars:2,consts:[["class","alert alert-success",4,"ngIf"],["class","col-12 col-md-8 col-lg-6","novalidate","",3,"formGroup","ngSubmit",4,"ngIf"],[1,"alert","alert-success"],["novalidate","",1,"col-12","col-md-8","col-lg-6",3,"formGroup","ngSubmit"],["class","form-group mb-2",4,"ngFor","ngForOf"],[1,"form-floating","mb-2"],["formControlName","comment","name","comment","placeholder","comment",1,"form-control",2,"height","100px",3,"ngClass"],["for","comment"],[1,"invalid-feedback"],[1,"form-group"],[1,"btn","btn-danger","mt-3","me-3",3,"disabled"],[1,"form-group","mb-2"],[1,"form-control",3,"formControlName","name","type","placeholder","ngClass"]],template:function(t,e){1&t&&(s.YNc(0,J,2,0,"div",0),s.YNc(1,S,11,4,"form",1)),2&t&&(s.Q6J("ngIf",e.orderIsComplete),s.xp6(1),s.Q6J("ngIf",!e.orderIsComplete))},directives:[n.O5,i._Y,i.JL,i.sg,n.sg,i.Fj,i.JJ,i.u,n.mk],styles:[".btn-danger[_ngcontent-%COMP%]{padding:.375rem 1.75rem;background-color:#ff4c3b}"]}),t})();function N(t,e){1&t&&(s.TgZ(0,"p"),s._uU(1,"\u041a\u043e\u0440\u0437\u0438\u043d\u0430 \u043f\u0443\u0441\u0442\u0430"),s.qZA())}function y(t,e){if(1&t&&(s.TgZ(0,"td",13),s._uU(1),s.ALo(2,"currency"),s.qZA()),2&t){const t=s.oxw().$implicit;s.xp6(1),s.Oqu(s.xi3(2,1,t.price*t.amount,"BYN "))}}function P(t,e){if(1&t){const t=s.EpF();s.TgZ(0,"tr",8),s.TgZ(1,"td"),s._UZ(2,"img",9),s.qZA(),s.TgZ(3,"td"),s._uU(4),s.qZA(),s.TgZ(5,"td"),s.TgZ(6,"input",10),s.NdJ("ngModelChange",function(e){return s.CHM(t).$implicit.amount=e}),s.qZA(),s.qZA(),s.TgZ(7,"td"),s._uU(8),s.qZA(),s.YNc(9,y,3,4,"td",11),s.TgZ(10,"td"),s.TgZ(11,"button",12),s.NdJ("click",function(){const e=s.CHM(t).$implicit;return s.oxw().deleteItem(e.id)}),s.qZA(),s.qZA(),s.qZA()}if(2&t){const t=e.$implicit;s.xp6(2),s.Q6J("src",t.imageUrls[0],s.LSH),s.xp6(2),s.Oqu(t.name),s.xp6(2),s.Q6J("ngModel",t.amount),s.xp6(2),s.Oqu(t.description.slice(0,128)),s.xp6(1),s.Q6J("ngIf",t.amount)}}let Y=(()=>{class t{constructor(t,e){this.userService=t,this.appdata=e,this.cartItems=[],this.userSubscription=g.w.EMPTY,this.itemSubscription=g.w.EMPTY}ngOnInit(){this.getCart()}ngOnDestroy(){this.userSubscription.unsubscribe(),this.itemSubscription.unsubscribe()}getCart(){this.userSubscription=this.userService.getUserInfo().pipe((0,l.U)(t=>{const e=[];for(let r of t.cart)this.userSubscription=this.appdata.getShopItemById(r).subscribe(t=>(t.amount=1,e.push(t)));return e})).subscribe(t=>{this.cartItems=t})}deleteItem(t){this.userService.deleteCartItem(t).subscribe(),this.getCart()}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(c.K),s.Y36(u.U))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-order"]],decls:10,vars:3,consts:[[1,"container-xxl","order"],[1,"row"],[1,"col-12"],[1,"h2"],[4,"ngIf"],[1,"table"],["class","align-items-center",4,"ngFor","ngForOf"],[3,"items"],[1,"align-items-center"],[1,"order__img","img-thumbnail",3,"src"],["type","number",3,"ngModel","ngModelChange"],["class","fw-bold",4,"ngIf"],[1,"order__delete-btn","btn","btn-light",3,"click"],[1,"fw-bold"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"div",2),s.TgZ(3,"h2",3),s._uU(4,"\u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"),s.qZA(),s.YNc(5,N,2,0,"p",4),s.TgZ(6,"table",5),s.TgZ(7,"tbody"),s.YNc(8,P,12,5,"tr",6),s.qZA(),s.qZA(),s._UZ(9,"app-user-order-form",7),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(5),s.Q6J("ngIf",0===e.cartItems.length),s.xp6(3),s.Q6J("ngForOf",e.cartItems),s.xp6(1),s.Q6J("items",e.cartItems))},directives:[n.O5,n.sg,U,i.wV,i.Fj,i.JJ,i.On],pipes:[n.H9],styles:[".order__img[_ngcontent-%COMP%]{height:5rem;min-width:5rem;object-fit:contain}.order[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{vertical-align:middle}.order__delete-btn[_ngcontent-%COMP%]{height:1.5rem;width:1.5rem;background-image:url(delete-icon.53f2d2c6b9f7282a0d80.svg);background-position:50%;background-repeat:no-repeat}"]}),t})();const Q=function(t,e){return{"is-invalid":t,"is-valid":e}};function $(t,e){if(1&t&&(s.TgZ(0,"div",7),s._UZ(1,"input",8),s.TgZ(2,"label",9),s._uU(3),s.qZA(),s.TgZ(4,"div",10),s._uU(5,"Looks good!"),s.qZA(),s.TgZ(6,"div",11),s._uU(7),s.qZA(),s.qZA()),2&t){const t=e.$implicit,r=s.oxw();s.xp6(1),s.Q6J("ngClass",s.WLB(8,Q,r.registForm.controls[t].invalid&&r.registForm.controls[t].touched,r.registForm.controls[t].valid))("formControlName",t)("placeholder",t)("name",t)("type","timeToDeliver"===t?"datetime-local":"text"),s.xp6(1),s.Q6J("for",t),s.xp6(1),s.Oqu(t),s.xp6(4),s.hij("Please enter a ",t,"")}}const L=[{path:"auth",component:_},{path:"register",component:(()=>{class t{constructor(t,e){this.router=t,this.userService=e,this.fields=["firstName","lastName","login","password"],this.registForm=new i.cw({firstName:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z\u0410-\u042f\u0430-\u044f]{3,40}$")]),lastName:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z\u0410-\u042f\u0430-\u044f]{3,40}$")]),login:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z0-9]{3,40}$")]),password:new i.NI("",[i.kI.required,i.kI.pattern("^[A-Za-z0-9]{8,20}$")])})}submit(){const t=this.registForm.value;localStorage.setItem("currentUser",JSON.stringify({login:t.login,password:t.password})),this.userService.registerUser(t).subscribe(t=>{this.userService.setAuthorizationToken(t.token),this.userService.isAuthorized=!0,this.router.navigate([""])})}}return t.\u0275fac=function(e){return new(e||t)(s.Y36(o.F0),s.Y36(c.K))},t.\u0275cmp=s.Xpm({type:t,selectors:[["app-user-registration"]],decls:9,vars:3,consts:[[1,"container-xxl"],[1,"row"],[1,"h2","col-12","col-md-8","mx-auto","mb-4"],["novalidate","",1,"col-12","col-md-8","mx-auto",3,"formGroup","ngSubmit"],["class","form-floating mb-2",4,"ngFor","ngForOf"],[1,"form-group"],[1,"btn","btn-danger","mt-3","me-3",3,"disabled"],[1,"form-floating","mb-2"],[1,"form-control",3,"ngClass","formControlName","placeholder","name","type"],[3,"for"],[1,"valid-feedback"],[1,"invalid-feedback"]],template:function(t,e){1&t&&(s.TgZ(0,"div",0),s.TgZ(1,"div",1),s.TgZ(2,"h2",2),s._uU(3,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),s.qZA(),s.TgZ(4,"form",3),s.NdJ("ngSubmit",function(){return e.submit()}),s.YNc(5,$,8,11,"div",4),s.TgZ(6,"div",5),s.TgZ(7,"button",6),s._uU(8," \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f "),s.qZA(),s.qZA(),s.qZA(),s.qZA(),s.qZA()),2&t&&(s.xp6(4),s.Q6J("formGroup",e.registForm),s.xp6(1),s.Q6J("ngForOf",e.fields),s.xp6(2),s.Q6J("disabled",e.registForm.invalid))},directives:[i._Y,i.JL,i.sg,n.sg,i.Fj,n.mk,i.JJ,i.u],styles:[".btn-danger[_ngcontent-%COMP%]{background-color:#ff4c3b}.btn-link[_ngcontent-%COMP%]{color:#ff4c3b}.btn-link[_ngcontent-%COMP%]:focus{outline:0;box-shadow:0 0 0 .25rem #ff4c3b40}"]}),t})()},{path:"order",canActivate:[a],component:Y},{path:"orders",canActivate:[a],component:O},{path:"aside",canActivate:[a],component:v}];let z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[o.Bz.forChild(L)],o.Bz]}),t})(),B=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=s.oAB({type:t}),t.\u0275inj=s.cJS({imports:[[n.ez,i.UX,z,i.u5]]}),t})()}}]);